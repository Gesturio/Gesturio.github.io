var app,dictionary,init;init=function($scope){var visualizeHand;return Leap.loop(),visualizeHand=function(controller){var camera,overlay;return controller.use("playback",{recording:"pinch-bones-3-57fps.json.lz",timeBetweenLoops:1e3,pauseOnHand:!0}).on("riggedHand.meshAdded",function(handMesh,leapHand){return handMesh.material.opacity=.7}),overlay=controller.plugins.playback.player.overlay,overlay.style.left=0,overlay.style.top="auto",overlay.style.padding=0,overlay.style.bottom="13px",overlay.style.width="180px",controller.use("riggedHand",{scale:1.3}),camera=controller.plugins.riggedHand.camera,camera.position.set(0,10,-30),camera.lookAt(new THREE.Vector3(5,5,0))},visualizeHand(Leap.loopController),function($){var _throttle_apply,decision,l,m,rezizeCanvas;return rezizeCanvas=function(){var canvas_width;return canvas_width=$(".visualizer-container").width(),$("canvas").width(canvas_width),$("canvas").height(.8*canvas_width)},$("#visualizer").append($("canvas")),rezizeCanvas(),$(window).resize(function(){return rezizeCanvas()}),m=0,l="_",decision="_",_throttle_apply=_.throttle(function(){var name;return name=decision.name,l!==name?(l=name,m=0):(m++,10===m?($scope.recognized=name,$scope.$apply(),console.log("apply ",name)):void 0)},20),Leap.loop(function(frame){var hand;return frame.hands[0]?(hand=frame.hands[0],Gesture.getGestureParams(hand),Gesture.getMetrics(Gesture.getParamsArray()),decision=Gesture.makeDecision(),_throttle_apply()):void 0})}(jQuery)},dictionary={ru:["МАМА","ТЕСТ","ПРИВЕТ"],en:["ABC","FKL","WAC"]},app=angular.module("app",["ngRoute"]),app.config(function($routeProvider){var rp;return rp=$routeProvider,rp.when("/",{name:"index",templateUrl:"views/front.html",controller:"IndexCtrl"}),rp.when("/main",{name:"index",templateUrl:"views/main.html",controller:"MainCtrl"})}),app.controller("IndexCtrl",function($rootScope,$scope,$location){return init($scope),$scope.ctrlname="index",$scope.recognized="_",$scope.$watch("recognized",function(x){return"_"!==x?$location.path("main"):void 0}),$rootScope.done=!0,$rootScope.loaded="loaded"}),app.controller("MainCtrl",function($rootScope,$scope){var i;return init($scope),$scope.languages=[{label:"English",dictionary:"en"},{label:"Russian",dictionary:"ru"}],$scope.score=0,$scope.cur_lang=$scope.languages[0],$scope.alphabet=GesturesSets.en,Gesture.GesturesSet=$scope.alphabet,$scope.progress=100,$scope.set_lang=function(lang){return $scope.cur_lang=lang,$scope.alphabet=GesturesSets[$scope.cur_lang.dictionary],Gesture.GesturesSet=$scope.alphabet,$scope.new_word()},i=0,$scope.new_word=function(){return $scope.word=dictionary[$scope.cur_lang.dictionary][Math.floor(Math.random()*dictionary[$scope.cur_lang.dictionary].length)].split("").map(function(x){return{name:x,status:""}}),$scope.word[0].status="current",i=0},$scope.new_word(),$scope.$watch("recognized",function(x){return $scope.word=$scope.word||[],x!==$scope.word[i].name?$scope.word[i].status="wrong":($scope.word[i].status="correct",i++,$scope.score++,i===$scope.word.length?setTimeout(function(){return $scope.new_word(),$scope.$apply()},1e3):void 0)}),$rootScope.loaded="loaded"}),angular.bootstrap(document,["app"]);