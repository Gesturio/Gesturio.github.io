var app,dictionary,init;init=function(e){var r;return Leap.loop(),r=function(e){var r,n;return e.use("playback",{recording:"pinch-bones-3-57fps.json.lz",timeBetweenLoops:1e3,pauseOnHand:!0}).on("riggedHand.meshAdded",function(e,r){return e.material.opacity=.7}),n=e.plugins.playback.player.overlay,n.style.left=0,n.style.top="auto",n.style.padding=0,n.style.bottom="13px",n.style.width="180px",e.use("riggedHand",{scale:1.3}),r=e.plugins.riggedHand.camera,r.position.set(0,10,-30),r.lookAt(new THREE.Vector3(5,5,0))},r(Leap.loopController),function(r){var n,t,o,a,i,u,s,c,d,l,p,f;return l=function(){var e;return e=r(".visualizer-container").width(),r("canvas").width(e),r("canvas").height(.8*e)},c=function(e){var r;if(r=void 0,d.push(e),20===d.length){for(r in d)if(d[r]!==e){e="?";break}return d.shift(),e}},p=function(e,n){return r.ajax({url:e,data:{data:n,gesture:i},success:function(){return s++%20===0?console.log(s+' Ok "'+i+'"'):void 0}})},o=function(e){return p("/node/store",e)},f=function(e){var r,n;r=void 0,n=void 0,r=[i];for(n in e)r.push(e[n]);return p("/node/statistic",r)},r("#visualizer").append(r("canvas")),l(),r(window).resize(function(){return l()}),u={Gesture:{}},i="_",s=1,console.log(i),d=[],r(document).on("keyup",function(e){return 18===e.keyCode?o(Gesture.getParamsArray()):void 0}).on("keyup",function(e){return 32===e.keyCode?f(Gesture.getParamsArray()):void 0}),a=15,t=_.debounce(function(e){return f(e)},a),n=r(".gesture_params"),Leap.loop(function(r){var n,o;if(r.hands[0]){o=r.hands[0],Gesture.getGestureParams(o),Gesture.getMetrics(Gesture.getParamsArray()),n=Gesture.makeDecision();for(s in n)u.Gesture[s]=n[s].name;for(s in n)if(n[s].name===i){t(u.Gesture);break}return e.recognized=u.Gesture.fuzzy,e.$apply()}})}(jQuery)},dictionary=["АААААААААААААА","ТЕСТ","ПРИВЕТ"],app=angular.module("app",[]),app.controller("IndexCtrl",function(e){var r;return init(e),e.score=0,e.score.total=214,e.alphabet=GesturesSets.ru,r=0,e.new_word=function(){return e.word=dictionary[Math.floor(Math.random()*dictionary.length)].split("").map(function(e){return{name:e,status:""}}),e.word[0].status="current",r=0},e.new_word(),e.$watch("recognized",function(n){return e.word=e.word||[],n!==e.word[r].name?e.word[r].status="wrong":(e.word[r].status="correct",r++,e.score++,console.log(n),r===e.word.length-1?e.new_word():void 0)})}),angular.bootstrap(document,["app"]);