var app,dictionary,init;init=function(e){var n;return Leap.loop(),n=function(e){var n,t;return e.use("playback",{recording:"pinch-bones-3-57fps.json.lz",timeBetweenLoops:1e3,pauseOnHand:!0}).on("riggedHand.meshAdded",function(e,n){return e.material.opacity=.7}),t=e.plugins.playback.player.overlay,t.style.left=0,t.style.top="auto",t.style.padding=0,t.style.bottom="13px",t.style.width="180px",e.use("riggedHand",{scale:1.3}),n=e.plugins.riggedHand.camera,n.position.set(0,10,-30),n.lookAt(new THREE.Vector3(5,5,0))},n(Leap.loopController),function(n){var t,r,o,a,i,u,s,l,c,d,p,f,g,y;return f=function(){var e;return e=n(".visualizer-container").width(),n("canvas").width(e),n("canvas").height(.8*e)},p=[],d=function(e){var n;if(p.push(e),20===p.length){for(n in p)if(p[n]!==e){e="?";break}return p.shift(),e}},g=function(e,t){return n.ajax({url:e,data:{data:t,gesture:i},success:function(){return s++%20===0?console.log(s+' Ok "'+i+'"'):void 0}})},o=function(e){return g("/node/store",e)},y=function(e){var n,t;n=void 0,t=void 0,n=[i];for(t in e)n.push(e[t]);return g("/node/statistic",n)},n("#visualizer").append(n("canvas")),f(),n(window).resize(function(){return f()}),u={Gesture:{}},i="_",s=1,console.log(i),p=[],n(document).on("keyup",function(e){return 18===e.keyCode?o(Gesture.getParamsArray()):void 0}).on("keyup",function(e){return 32===e.keyCode?y(Gesture.getParamsArray()):void 0}),a=15,t=_.debounce(function(e){return y(e)},a),c=0,l="_",r=_.throttle(function(){return l!==u.Gesture.fuzzy?(l=u.Gesture.fuzzy,c=0):(c++,5===c?(e.recognized=u.Gesture.fuzzy,e.$apply(),console.log("apply ",u.Gesture.fuzzy)):void 0)},50),Leap.loop(function(e){var n,t;if(e.hands[0]){t=e.hands[0],Gesture.getGestureParams(t),Gesture.getMetrics(Gesture.getParamsArray()),n=Gesture.makeDecision();for(s in n)u.Gesture[s]=n[s].name;return r()}})}(jQuery)},dictionary=["МАМА","ТЕСТ","ПРИВЕТ"],app=angular.module("app",["ngRoute"]),app.config(function(e){var n;return n=e,n.when("/",{name:"index",templateUrl:"views/front.html",controller:"IndexCtrl"}),n.when("/main",{name:"index",templateUrl:"views/main.html",controller:"MainCtrl"})}),app.controller("IndexCtrl",function(e,n,t){return init(n),n.ctrlname="index",n.recognized="_",n.$watch("recognized",function(e){return"_"!==e?setTimeout(function(){return t.path("main"),console.log("dfdf")},200):void 0}),e.done=!0,e.loaded="loaded"}),app.controller("MainCtrl",function(e,n){var t;return init(n),n.languages=[{label:"English",dictionary:"en"},{label:"Russian",dictionary:"ru"}],n.score=0,n.cur_lang=n.languages[0],n.alphabet=GesturesSets.en,Gesture.GesturesSet=n.alphabet,n.set_lang=function(e){return n.cur_lang=e,n.alphabet=GesturesSets[n.cur_lang.dictionary],Gesture.GesturesSet=n.alphabet},t=0,n.new_word=function(){return n.word=dictionary[Math.floor(Math.random()*dictionary.length)].split("").map(function(e){return{name:e,status:""}}),n.word[0].status="current",t=0},n.new_word(),n.$watch("recognized",function(e){return n.word=n.word||[],e!==n.word[t].name?n.word[t].status="wrong":(n.word[t].status="correct",t++,n.score++,t===n.word.length?setTimeout(function(){return n.new_word(),n.$apply()},1e3):void 0)}),e.loaded="loaded"}),angular.bootstrap(document,["app"]);