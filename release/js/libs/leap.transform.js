(function(){var n=[].slice;Leap.plugin("transform",function(t){var o,i,e,r,a;return null==t&&(t={}),o=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a=new THREE.Matrix4,t.transform||t.position||t.quaternion||t.scale?(t.getMatrix=function(n){var i;return t.transform?(i="function"==typeof t.transform?t.transform(n):t.transform,window.THREE&&i instanceof THREE.Matrix4?i.elements:i):t.position||t.quaternion||t.scale?(a.set.apply(a,o),t.quaternion&&a.makeRotationFromQuaternion("function"==typeof t.quaternion?t.quaternion(n):t.quaternion),t.scale&&a.scale("function"==typeof t.scale?t.scale(n):t.scale),t.position&&a.setPosition("function"==typeof t.position?t.position(n):t.position),a.elements):o},r=function(){var t,o,i,e,r,a;for(t=arguments[0],i=2<=arguments.length?n.call(arguments,1):[],a=[],e=0,r=i.length;r>e;e++)o=i[e],o?a.push(Leap.vec3.transformMat4(o,o,t)):a.push(void 0);return a},e=function(n,t,o){var i,e,r;return i=t[0],e=t[1],r=t[2],n[0]=o[0]*i+o[4]*e+o[8]*r,n[1]=o[1]*i+o[5]*e+o[9]*r,n[2]=o[2]*i+o[6]*e+o[10]*r,n},i=function(){var t,o,i,r,a,s;for(t=arguments[0],i=2<=arguments.length?n.call(arguments,1):[],s=[],r=0,a=i.length;a>r;r++)o=i[r],o?s.push(e(o,o,t)):s.push(void 0);return s},{hand:function(n){var o,e,a,s,u,l;for(e=t.getMatrix(n),r(e,n.palmPosition,n.stabilizedPalmPosition,n.sphereCenter),i(e,n.direction,n.palmNormal,n.palmVelocity),u=n.fingers,l=[],a=0,s=u.length;s>a;a++)o=u[a],r(e,o.carpPosition,o.mcpPosition,o.pipPosition,o.dipPosition,o.tipPosition),l.push(i(e,o.direction));return l}}):{}})}).call(this);