!function(e){e._m="_m_p",e.cur_lang=e.cur_lang||"ru",e.GesturesSet=GesturesSets[e.cur_lang],e.probability=[],e.recognizedGesture="",e.recognizedProbability=0,e.gestureParams={},e.gestureParamsArray=[],e.getMetrics=function(){e.probability={fuzzy:[],euclidean:[],taxicab:[],correlation:[],cosine:[]};for(var r in e.GesturesSet)e.probability.fuzzy.push(Metrics.fs(e.gestureParamsArray,e._m,e.GesturesSet[r].params.M,e.GesturesSet[r].params.D)),e.probability.euclidean.push(Metrics.euclidean(e.gestureParamsArray,e.GesturesSet[r].params.M)),e.probability.taxicab.push(Metrics.taxicab(e.gestureParamsArray,e.GesturesSet[r].params.M)),e.probability.correlation.push(Metrics.correlation(e.gestureParamsArray,e.GesturesSet[r].params.M)),e.probability.cosine.push(Metrics.cosine(e.gestureParamsArray,e.GesturesSet[r].params.M));return e.probability},e.makeDecision=function(){var r={fuzzy:e.max(e.probability.fuzzy),euclidean:e.min(e.probability.euclidean),taxicab:e.min(e.probability.taxicab),correlation:e.max(e.probability.correlation),cosine:e.max(e.probability.cosine)};return{fuzzy:e.GesturesSet[r.fuzzy],euclidean:e.GesturesSet[r.euclidean],taxicab:e.GesturesSet[r.taxicab],correlation:e.GesturesSet[r.correlation],cosine:e.GesturesSet[r.correlation]}},e.max=function(e){var r=0;for(var t in e)e[t]>e[r]&&(r=t);return r},e.min=function(e){var r=0;for(var t in e)e[t]<e[r]&&(r=t);return r},e.getParamsArray=function(){return e.gestureParamsArray=[],e.obj2array(e.gestureParams),e.gestureParamsArray},e.obj2array=function(r){for(var t in r)"object"==typeof r[t]||"array"==typeof r[t]?e.obj2array(r[t]):e.gestureParamsArray.push(r[t])},e.getGestureParams=function(r){return e.gestureParams={Palm:e.getPalmParams(r),Fingers:e.getFingersParams(r)},e.gestureParams},e.getPalmParams=function(r){return{N:e.getPalmNormalParams(r),D:e.getPalmDirectionParams(r)}},e.getPalmNormalParams=function(e){return Linear.cartesian2spherical(e.palmNormal)},e.getPalmDirectionParams=function(e){var r=Linear.getVector(e.fingers[2].bones[0].prevJoint,e.fingers[2].bones[0].nextJoint);return Linear.cartesian2spherical(r)},e.getFingersParams=function(r){return{T:e.getFingerParams(r,0),I:e.getFingerParams(r,1),M:e.getFingerParams(r,2),R:e.getFingerParams(r,3),L:e.getFingerParams(r,4)}},e.getFingerParams=function(r,t){var n=r.fingers[t];return 0!=t?[e.getPIPAngle(n),e.getMCPAngle(r,n),e.getDIPAngle(n)]:[e.getTfingerIPangle(n),e.getTfingerMCPangle(r,n)]},e.getTfingerIPangle=function(r){return e.getJointAngle(r.bones[2],r.bones[3])},e.getTfingerMCPangle=function(e,r){var t=Linear.getVector(e.fingers[1].bones[0].nextJoint,e.fingers[4].bones[0].nextJoint),n=Linear.getVector(e.fingers[2].bones[1].prevJoint,e.fingers[2].bones[1].nextJoint),a=Linear.getVector(r.bones[2].prevJoint,r.bones[2].nextJoint);return[Linear.getAngle(t,a),Linear.getAngle(n,a)]},e.getDIPAngle=function(r){return e.getJointAngle(r.bones[2],r.bones[3])},e.getPIPAngle=function(r){return e.getJointAngle(r.bones[1],r.bones[2])},e.getMCPAngle=function(r,t){var n=Linear.getVector(r.fingers[1].bones[0].nextJoint,r.fingers[4].bones[0].nextJoint),a=Linear.getVector(t.bones[1].prevJoint,t.bones[1].nextJoint);return[Linear.getAngle(n,a),e.getJointAngle(t.bones[0],t.bones[1])]},e.getJointAngle=function(e,r){var t=Linear.getVector(e.prevJoint,e.nextJoint),n=Linear.getVector(r.prevJoint,r.nextJoint);return Linear.getAngle(t,n)}}("undefined"==typeof exports?this.Gesture={}:exports);